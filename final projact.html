<html>
    <head>
        <title>練習搶票神器～</title>
        <style>
            body {
                font-family: Arial;
                text-align: center;
                background-color: white;
            }

            h1 {
                color:black;
            }

            #score ,#time{
                font-size: 24px;
                margin: 10px;
            }

            button {
                font-size:18px ;
                padding: 10px 25px;
                margin: 5px;
                cursor: pointer;
            }

            #rank {
                margin-top: 20px;
                font-size: 20px;
            }
        </style>
       
    </head>
    <body>
        <h1>練習搶票神器～</h1>
        <p>分數越高越容易搶到喔!</p>

        <div id="score">分數:0</div>
        <div id="time">剩餘時間:10秒</div>
        
        <button onclick="clickme()">點我</button>
        <button onclick="reestarGame()">重新開始</button>

        <div id="rank">
            <h3>排行榜</h3>
            <ol id="rankList"></ol>
        </div>

        <script>
            let score = 0;
            let timeLeft = 10;
            let gameOver = false;
            let timer = null;
            let rankings = [];

            function clickme() {
                if(!gameOver) {
                    score++;
                    document.getElementById("score").innerText = "分數:" + score;
                }
            }

            function startTimer() {
                clearInterval(timer);
                timer = setInterval(function() {
                
                
                document.getElementById("time").innerText = "剩餘時間:" + timeLeft + "秒";
                
                
                    if(timeLeft === 0){
                        clearInterval(timer);
                        endGame();
                    return;
                }
            timeLeft--;
            },1000);
        }

        function endGame(){
            gameOver = true;
            clearInterval(timer);

            rankings.push(score);
            rankings.sort((a,b) => b - a);
            rankings = rankings.slice(0,3);

            updateRank();
            setTimeout(function() {
                alert("時間到!你的分數是:" + score);
            },10);
        }

        function updateRank() {
            let list = document.getElementById("rankList");
            list.innerHTML = "";

            rankings.forEach(function(s,i) {
                let li = document.createElement("li");
                li.innerText = `第${i + 1}名:${s}分`;
                list.appendChild(li);
            });
        }

        function restartGame() {
            clearInterval(timer);
            score = 0;
            timeLeft = 10 ;
            gameOver = false;

            document.getElementById("score").innerText = "分數:0";
            document.getElementById("timer").innerText = "剩餘時間:10秒";

            startTimer();
        }

        </script>

    </body>
</html>